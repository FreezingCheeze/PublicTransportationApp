<!DOCTYPE html>
<html lang="en">
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</html>

<head>
    <meta charset="UTF-8">
    <title>Queried Trips</title>
</head>
<body>

<div class="container">
    From <b><span th:text="${departure}"></span></b> to <b><span th:text="${destination}"></span></b>
<table class="table">
    <tbody>
    <tr>
        <th>From</th>
        <th>To</th>
        <th>Duration(In minutes)</th>
        <th>Departure</th>
        <th>Arrival</th>
        <th>Number of Transfers</th>
        <th>Crowd Forecast</th>
        <th>Via</th>
        <th>Is optimal?</th>


    </tr>

    <ul th:each="item: ${trip}">
        <tr>
            <td th:text="${departure}"></td>
            <td th:text="${destination}"></td>
            <td th:text="${item.plannedDurationInMinutes}"></td>
            <td th:text="${item.legs[0].stops[0].plannedDepartureDateTime}"></td>
            <ul th:each="leg,iterleg: ${item.legs}" th:if="${iterleg.index >= iterleg.size-1}">
                <ul th:each="stop,iterstop: ${leg.stops}" th:if="${iterstop.index >= iterstop.size-1}">
                    <td th:text="${{stop.plannedArrivalDateTime}}"></td>

                </ul>
            </ul>
            <td th:text="${item.transfers}"></td>
            <td th:text="${item.crowdForecast}"></td>
            <td>
            <ul th:each="legs,iterlegs: ${item.legs}" th:if="${iterlegs.index < iterlegs.size-1}">
            <span th:text="${legs.destination}"></span>
            </ul>
            </td>
            <td th:text="${item.optimal}"></td>

        </tr>
    </ul>





    </tbody>
</table>
</div>
</body>
